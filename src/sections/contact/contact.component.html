<section>
    <div class="contact-main">
        <div class="headline">
            <h2>Contact me</h2>  
            <a class="arrow-up"(mouseover)="arrowIsHovered = true" (mouseout)="arrowIsHovered = false" href="#atf">
                <img 
                [src]="arrowIsHovered ? '/assets/img/arrows/arrow-up-hover.png' : '/assets/img/arrows/arrow-up-default.png'" 
                alt="Arrow up">
                </a>
            </div>

            <div class="description">
                <div class="contact-me-text">
                    <p>@if(global.language === 'en'){{{contacMeTextEn}}}@else{{{contacMeTextDe}}}</p>
                </div>
                <div class="contact-data">
                    <div class="email" (mouseover)="mailIsHovered = true" (mouseout)="mailIsHovered = false">                        
                        <a href="mailto: felixoppermann@outlook.de"><img 
                            [src]="mailIsHovered ? '/assets/img/icon-contact/mail-hover.svg' : '/assets/img/icon-contact/mail.svg'" alt="Mail">
                            <span>{{'E-Mail: felixoppermann@outlook.de'}}</span>
                        </a>
                    </div>
                    <div (mouseover)="phoneIsHovered = true" (mouseout)="phoneIsHovered = false" class="phone">
                        <img [src]="phoneIsHovered ? '/assets/img/icon-contact/phone-hover.svg' : '/assets/img/icon-contact/phone.svg'" alt="Phone">
                        <span>Tel: 0178 1666079</span>
                    </div>
                </div>
            </div>


            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
                
               <div class="input-data">
                    <div class="form-field">
                        <label for="email">
                        <ng-container *ngIf="(contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
                            Email is required.
                        </ng-container>
                        <ng-container *ngIf="(contactForm.get('email')?.errors?.['email'] && !contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
                            Invalid email format.
                        </ng-container>
                        <ng-container *ngIf="!contactForm.get('email')?.errors || (!contactForm.get('email')?.touched && !submitted)">
                            Email
                        </ng-container>
                        </label>
                        <input id="email" formControlName="email" type="email" />
                    </div>    
                    
                    <div class="form-field">
                        <label for="name">
                            <ng-container *ngIf="(contactForm.get('name')?.errors?.['required'] && (contactForm.get('name')?.touched || submitted))">
                            Your Name is required.
                            </ng-container>
                            <ng-container *ngIf="!contactForm.get('name')?.errors || (!contactForm.get('name')?.touched && !submitted)">
                            Your name
                            </ng-container>
                        </label>
                        <input id="name" formControlName="name" type="text" />
                    </div>
               </div>
               
                <div class="form-field">
                  <label for="message">
                    {{ (contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted)) ? 'Message is required.' : 'Message' }}
                  </label>
                  <textarea  id="message" formControlName="message" rows="6"></textarea>
                </div>

                <div class="form-field checkbox">
                    <input type="checkbox" id="customCheckbox" formControlName="privacyPolicy" hidden  checked="unchecked"/>
                  
                    <label
                      for="customCheckbox"
                      class="custom-checkbox"
                      (mouseenter)="isCheckboxHovered = true"
                      (mouseleave)="isCheckboxHovered = false"
                    >
                      <ng-container *ngIf="!contactForm.get('privacyPolicy')?.value">
                        <img
                          *ngIf="hasPrivacyError()"
                          src="/assets/img/icon-contact/pp-error.svg"
                          alt="Error checkbox"
                        />
                        <img
                          *ngIf="!hasPrivacyError() && isCheckboxHovered"
                          src="/assets/img/icon-contact/pp-hover.svg"
                          alt="Checkbox hover"
                        />
                        <img
                          *ngIf="!hasPrivacyError() && !isCheckboxHovered"
                          src="/assets/img/icon-contact/pp-default.svg"
                          alt="Unchecked"
                        />
                      </ng-container>
                  
                      <img
                        *ngIf="contactForm.get('privacyPolicy')?.value"
                        src="/assets/img/icon-contact/pp-checked.svg"
                        alt="Checked"
                      />
                  
                      I've read the <a href="#atf">privacy policy</a> and agree to the processing of my data as outlined.
                    </label>
                  
                    <div class="error" *ngIf="hasPrivacyError()">
                      Please accept the privacy policy.
                    </div>
                  </div>
                  
                <button type="submit">Send</button>

              </form>       

    </div>
    

</section>
