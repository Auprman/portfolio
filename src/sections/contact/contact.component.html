<section>
    <div class="contact-main">
        <div class="headline">
            <h2>Contact me</h2>  
            <a class="arrow-up"(mouseover)="arrowIsHovered = true" (mouseout)="arrowIsHovered = false" href="#atf">
                <img 
                [src]="arrowIsHovered ? '/assets/img/arrows/arrow-up-hover.png' : '/assets/img/arrows/arrow-up-default.png'" 
                alt="Arrow up">
                </a>
            </div>

            <div class="description">
                <div class="contact-me-text">
                    <p>@if(global.language === 'en'){{{contacMeTextEn}}}@else{{{contacMeTextDe}}}</p>
                </div>
                <div class="contact-data">
                    <div class="email" (mouseover)="mailIsHovered = true" (mouseout)="mailIsHovered = false">                        
                        <a href="mailto: mail@felix-oppermann.com"><img 
                            [src]="mailIsHovered ? '/assets/img/icon-contact/mail-hover.svg' : '/assets/img/icon-contact/mail.svg'" alt="Mail">
                            <span>{{'E-Mail: mail@felix-oppermann.com'}}</span>
                        </a>
                    </div>
                    <div (mouseover)="phoneIsHovered = true" (mouseout)="phoneIsHovered = false" class="phone">
                        <img [src]="phoneIsHovered ? '/assets/img/icon-contact/phone-hover.svg' : '/assets/img/icon-contact/phone.svg'" alt="Phone">
                        <span>Tel: 0178 1666079</span>
                    </div>
                </div>
            </div>


            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
                
               <div class="input-data">
                    <div class="form-field">
                        <label for="email">
                        <ng-container class="input-error" *ngIf="(contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
                          <div class="input-error">Email is required.</div>
                        </ng-container>
                        <ng-container class="input-error" *ngIf="(contactForm.get('email')?.errors?.['email'] && !contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
                            <div class="input-error">Invalid email format.</div>
                        </ng-container>
                        <ng-container *ngIf="!contactForm.get('email')?.errors || (!contactForm.get('email')?.touched && !submitted)">
                            Email
                        </ng-container>
                        </label>
                        <input [ngStyle]="contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || submitted) ? { 'border': '1px solid #E44C36' } : null"
                        id="email" formControlName="email" type="email" />
                    </div>    
                    
                    <div class="form-field">
                        <label for="name">
                            <ng-container  *ngIf="(contactForm.get('name')?.errors?.['required'] && (contactForm.get('name')?.touched || submitted))">
                           <div class="input-error"> Your Name is required.</div>
                            </ng-container>
                            <ng-container *ngIf="!contactForm.get('name')?.errors || (!contactForm.get('name')?.touched && !submitted)">
                            Your name
                            </ng-container>
                        </label>
                        <input [ngStyle]="contactForm.get('name')?.invalid && (contactForm.get('name')?.touched || submitted) ? { 'border': '1px solid #E44C36' } : null"
                         id="name" formControlName="name" type="text" />
                    </div>
               </div>
               
                <div class="form-field">
                  <label for="message">
                    <ng-container  *ngIf="(contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted))">
                      <div class="input-error">Message is required.</div>
                       </ng-container>
                       <ng-container *ngIf="!contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted)">
                        Message
                       </ng-container>
                  </label>
                  <textarea [ngStyle]="contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted) ? { 'border': '1px solid #E44C36' } : null" id="message" formControlName="message" rows="6"></textarea>
                </div>

                <div class="form-field checkbox">
                  <input 
                    type="checkbox" 
                    id="customCheckbox" 
                    formControlName="privacyPolicy" 
                    hidden
                  />
                
                  <label
                    for="customCheckbox"
                    class="custom-checkbox"                    
                  >
                    <img 
                    (mouseenter)="isCheckboxHovered = true"
                    (mouseleave)="isCheckboxHovered = false"
                    [src]="getCheckboxImage()" alt="Checkbox state" 
                    />                
                    <p>I've read the <a href="#atf"> privacy policy </a> and agree to the processing of my data as outlined.</p>
                  </label>
                
                  <div class="error" *ngIf="hasPrivacyError()">
                    Please accept the privacy policy.
                  </div>
                </div>
                  
                <div class="button-wrapper">
                  <button [ngClass]="{ 'disabled': contactForm.invalid }" type="submit">Send</button>
                </div>
              </form>  

              <a  href="#why-me" class="arrow-up-mobile">
                <img src="/assets/img/arrows/arrow-up-default.png" alt="" class="icon default">
                <img src="/assets/img/arrows/arrow-up-hover.png" alt="" class="icon hover">
              </a>
    </div>
    

</section>
